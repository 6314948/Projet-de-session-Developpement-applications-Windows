<Page
    x:Class="ProjetElectionsWinUI.Views.ElecteursPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <!-- 
        Layout à deux colonnes : liste des électeurs à gauche,
        formulaire d'édition à droite.
        Même structure que les pages Districts et Candidats pour garder l’expérience uniforme.
    -->
    <Grid Padding="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="3*" />
        </Grid.ColumnDefinitions>

        <!-- =========================== -->
        <!--             TITRE           -->
        <!-- =========================== -->
        <TextBlock Text="Gestion des électeurs"
                   FontSize="32"
                   FontWeight="Bold"
                   Margin="0 0 0 20"
                   Grid.ColumnSpan="2" />

        <!-- =========================== -->
        <!--       LISTE ÉLECTEURS       -->
        <!-- =========================== -->
        <ListView Grid.Column="0"
                  Margin="0 60 20 0"
                  ItemsSource="{Binding Electeurs}"
                  SelectedItem="{Binding SelectedElecteur, Mode=TwoWay}">

            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="5"
                                Padding="10"
                                Background="#EFEFEF"
                                CornerRadius="6">

                        <!-- Nom -->
                        <TextBlock Text="{Binding Nom}"
                                   FontSize="20"
                                   FontWeight="SemiBold" />

                        <!-- Adresse -->
                        <TextBlock>
                            <Run Text="Adresse : " />
                            <Run Text="{Binding Adresse}" />
                        </TextBlock>

                        <!-- Date de naissance -->
                        <TextBlock>
                            <Run Text="Date de naissance : " />
                            <Run Text="{Binding DateNaissanceDisplay}" />
                        </TextBlock>

                        <!-- District -->
                        <TextBlock>
                            <Run Text="District : " />
                            <Run Text="{Binding District.NomDistrict}" />
                        </TextBlock>

                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <!-- =========================== -->
        <!--     FORMULAIRE ÉLECTEUR     -->
        <!-- =========================== -->
        <StackPanel Grid.Column="1"
                    Margin="20 60 0 0"
                    Spacing="10">

            <!-- Nom -->
            <TextBlock Text="Nom :" FontWeight="SemiBold" />
            <TextBox Text="{Binding SelectedElecteur.Nom, Mode=TwoWay}"
                     PlaceholderText="Ex: Jean Tremblay" />
            <TextBlock Text="{Binding NomErreur}"
                       Foreground="Red"
                       FontSize="12"
                       TextWrapping="Wrap"/>

            <!-- Adresse -->
            <TextBlock Text="Adresse :" FontWeight="SemiBold" />
            <TextBox Text="{Binding SelectedElecteur.Adresse, Mode=TwoWay}"
                     PlaceholderText="Ex: 123 Rue Principale" />
            <TextBlock Text="{Binding AdresseErreur}"
                       Foreground="Red"
                       FontSize="12" />

            <!-- Date de naissance (DatePicker) -->
            <TextBlock Text="Date de naissance :" FontWeight="SemiBold" />
            <DatePicker Date="{Binding DateNaissancePicker, Mode=TwoWay}" />
            <TextBlock Text="{Binding DateErreur}"
                       Foreground="Red"
                       FontSize="12" />

            <!-- District (ComboBox) -->
            <TextBlock Text="District :" FontWeight="SemiBold" />
            <ComboBox ItemsSource="{Binding Districts}"
                      SelectedValue="{Binding SelectedElecteur.DistrictElectoralId, Mode=TwoWay}"
                      SelectedValuePath="DistrictElectoralId"
                      DisplayMemberPath="NomDistrict"
                      PlaceholderText="Choisir un district" />
            <TextBlock Text="{Binding DistrictErreur}"
                       Foreground="Red"
                       FontSize="12" />

            <!-- Boutons CRUD -->
            <StackPanel Orientation="Horizontal"
                        Spacing="10"
                        Margin="0 20 0 0">

                <Button Content="Ajouter"
                        Width="100"
                        Command="{Binding AddElecteurCommand}" />

                <Button Content="Modifier"
                        Width="100"
                        Command="{Binding UpdateElecteurCommand}" />

                <!-- Suppression via code-behind (dialogue de confirmation) -->
                <Button Content="Supprimer"
                        Width="100"
                        Click="Supprimer_Click" />

            </StackPanel>

        </StackPanel>

    </Grid>

</Page>
